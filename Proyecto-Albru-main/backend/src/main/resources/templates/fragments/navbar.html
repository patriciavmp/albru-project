<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>
    <!-- Fragmento del menú lateral -->
    <div th:fragment="sidebar" class="sidebar">
        <ul>
            <li class="logo" style="--bg: #333">
                <a href="#">
                    <div class="icon"></div>
                    <div class="text">ALBRU</div>
                </a>
            </li>

            <div class="Menulist">
                <!-- Inicio: visible para cualquier rol autenticado -->
                <li style="--bg: #f44336" id="menu-inicio" sec:authorize="isAuthenticated()">
                    <a th:href="@{/user/}">
                        <div class="icon"><i class='bx bx-home-alt-2'></i></div>
                        <div class="text">Inicio</div>
                    </a>
                </li>

                <!-- Registro: solo para ROLE_ASESOR -->
                <li style="--bg: #2196f3" id="menu-registro" sec:authorize="hasRole('ASESOR')">
                    <a th:href="@{/user/registro}">
                        <div class="icon"><i class='bx bx-customize'></i></div>
                        <div class="text">Registro</div>
                    </a>
                </li>

                <!-- Crear usuario: solo para ROLE_ADMIN -->
                <li style="--bg: #2196f3" id="menu-crear-usuario" sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/user/admin}">
                        <div class="icon"><i class='bx bx-customize'></i></div>
                        <div class="text">Crear usuario</div>
                    </a>
                </li>

                <!-- Leads: solo para ROLE_ADMIN -->
                <li style="--bg: #ff7043" id="menu-leads" sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/user/leads}">
                        <div class="icon"><i class='bx bx-send'></i></div>
                        <div class="text">Asignar Leads</div>
                    </a>
                </li>

                <!-- AsistenciaSeguimiento PARA ROLE_ADMIN  -->
                <li style="--bg: #0fc70f" id="menu-asistenciaSeguimiento" sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/user/asistenciaSeguimiento}">
                        <div class="icon"><i class='bx bxs-calendar'></i></div>
                        <div class="text">Asistencias</div>
                    </a>
                </li>

                <!-- Actividades Seguimiento PARA ROLE_ADMIN  -->
                <li style="--bg: #9b59b6" id="menu-actividades" sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/user/actividades}">
                        <div class="icon"><i class='bx bxs-cog'></i></div>
                        <div class="text">Actividades</div>
                    </a>
                </li>

                <!-- AYUDA / SOPORTE PARA ADMIN -->
                <li style="--bg: #4ff" id="ayudaAdmin" sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/user/ayudaAdmin}">
                        <div class="icon"><i class='bx bx-info-circle'></i></div>
                        <div class="text">Ayuda / Soporte</div>
                    </a>
                </li>

                <!-- AYUDA / SOPORTE PARA ASESOR -->
                <li style="--bg: #4ff" id="ayudaAsesor" sec:authorize="hasRole('ASESOR')">
                    <a th:href="@{/user/ayudaAsesor}">
                        <div class="icon"><i class='bx bx-info-circle'></i></div>
                        <div class="text">Ayuda / Soporte</div>
                    </a>
                </li>

                <!-- Perfil: visible para cualquier rol autenticado -->
                <li style="--bg: #ffa117" id="menu-perfil" sec:authorize="isAuthenticated()">
                    <a th:href="@{/user/perfil}">
                        <div class="icon"><i class='bx bxs-face-mask'></i></div>
                        <div class="text">Perfil</div>
                    </a>
                </li>
            </div>

            <div class="bottom">
                <li style="--bg: #d94aae" sec:authorize="isAuthenticated()">
                    <a href="#">
                        <div class="imgBx">
                            <img src="/images/logo.png" alt="" />
                        </div>
                        <div class="text" sec:authentication="principal.fullName"></div>
                    </a>
                </li>
                <li style="--bg: #db1d1d" sec:authorize="isAuthenticated()">
                    <a th:href="@{/login}">
                        <div class="icon"><i class="bx bx-log-out"></i></div>
                        <div class="text">Cerrar sesión</div>
                    </a>
                </li>
            </div>
        </ul>
    </div>

    <!-- Fragmento del toggle del menú -->
    <div th:fragment="menuToggle" class="menuToggle" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
    </div>
</body>

</html>